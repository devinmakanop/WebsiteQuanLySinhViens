<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
    integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="./lichGiangday.css">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

  <title>Thời khóa biểu</title>
</head>

<body>
  <div class="container ">
    <div class="sidebar d-flex flex-column flex-shrink-0 text-white"
      style="width: 210px; height: 100vh; padding: 0; margin-left: -12px; position: fixed; background-color: #ad171c;">
      <a href="/" class="d-flex align-items-center mb-md-0 me-md-auto text-white text-decoration-none">
        <svg class="bi me-2" width="40" height="32">
          <use xlink:href="#bootstrap" />
        </svg>
        <span class="fs-6">Tài khoản giáo viên</span>
      </a>
      <hr>
      <ul class="nav nav-pills flex-column mb-auto list-unstyled">
        <li class="nav-item">
          <a href="http://127.0.0.1:5500/GiaoVien/thongTinCaNhan.html" class="nav-link text-white" aria-current="page">
            <svg class="bi me-2" width="16" height="16">
              <use xlink:href="http://127.0.0.1:5500/GiaoVien/thongTinCaNhan.html" />
            </svg>
            Thông tin cá nhân
          </a>
        </li>
        <li>
          <a href="http://127.0.0.1:5500/GiaoVien/danhSachLop.html" class="nav-link text-white">
            <svg class="bi me-2" width="16" height="16">
              <use xlink:href="http://127.0.0.1:5500/GiaoVien/danhSachLop.html" />
            </svg>
            Danh sách lớp
          </a>
        </li>
        <li class="" style="margin-left: 28px;">
          <button class="nav-link text-white btn btn-toggle align-items-center rounded collapsed dropdown-toggle"
            data-bs-toggle="collapse" data-bs-target="#dashboard-collapse" aria-expanded="false">
            <span style="font-size: 14px;">Thời khóa biểu</span>
          </button>
          <div class="collapse" id="dashboard-collapse">
            <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
              <li style="margin-left: 20px;"><a href="http://127.0.0.1:5500/GiaoVien/lichGiangDay.html"
                  class="nav-link text-white link-dark rounded "><span>Lịch giảng dạy</span></a></li>
              <li style="margin-left: 20px;"><a href="http://127.0.0.1:5500/GiaoVien/lichCoiThi.html"
                  class="nav-link text-white link-dark rounded"><span>Lịch
                    coi thi</span></a></li>
            </ul>
          </div>
        </li>
      </ul>
    </div>
    <div class="contain">
      <div class="cont mt-4 pb-3">
        <div class="filter-date">
          <p class="lead pt-3" style="font-size: 15px; margin-left: -75px;">
            Thời khóa biểu
          </p>
          <hr style="margin-top: -5px; width: 1055px; margin-left: -75px;">

          <div class="date">
            <div class="box-1 row ">
              <div class="col-3 title date-start f-14">Ngày bắt đầu: </div>
              <div class="col-3 title date-end f-14 ">Ngày kết thúc: </div>
              <div class="day col-2 margin-all-date">
                <label for="day col" class="form-label f-14">Ngày</label>
                <input type="text" id="dayStart" class="form-control" aria-describedby="day">
              </div>
              <div class="month col-2 margin-all-date">
                <label for="month" class="form-label f-14">Tháng</label>
                <input type="number" id="monthStart" class="form-control" aria-describedby="day">
              </div>
              <div class="year col-2 margin-all-date">
                <label for="year" class="form-label f-14">Năm</label>
                <input type="number" id="yearStart" class="form-control" aria-describedby="day" value="2024">
              </div>
              <i class="icon-calender mt-5 col-2 fa-solid fa-calendar-days fa-2xl" style="color: #404040; "></i>
            </div>
          </div>
          <div class="all-date">
            <div class="date">
              <div class="box-1 row mt-3">
                <div class="day col-2 margin-all-date">
                  <label for="day col" class="form-label f-14">Ngày</label>
                  <input type="text" id="dayEnd" class="form-control" aria-describedby="day">
                </div>
                <div class="month col-2 margin-all-date">
                  <label for="month" class="form-label f-14">Tháng</label>
                  <input type="number" id="monthEnd" class="form-control" aria-describedby="day">
                </div>
                <div class="year col-2 margin-all-date">
                  <label for="year" class="form-label f-14">Năm</label>
                  <input type="number" id="yearEnd" class="form-control" aria-describedby="day" value="2024">
                </div>
                <i class="icon-calender mt-5 col-2 fa-solid fa-calendar-days fa-2xl" style="color: #404040; "></i>
              </div>
            </div>
            <button type="button" id="search" class="btn btn-danger" style="margin-left: -10px;">Lọc dữ liệu</button>
          </div>
        </div>
        <div class="main">
          <table class="table table-striped table-hover table-bordered">
            <thead>
              <tr>
                <th scope="col">STT</th>
                <th scope="col">Thứ</th>
                <th scope="col ">Ngày</th>
                <th colspan="2" scope="col">Sáng</th>
                <th colspan="2" scope="col">Chiều</th>
                <th colspan="2" scope="col">Tối</th>
                <th scope="col">Ghi chú</th>

              </tr>
            </thead>
            <tbody>
              <tr>
                <th scope="row">1</th>
                <td>Thứ 5 </td>
                <td>30/05/2024 </td>
                <td class="bold" colspan="2"> (3,4) - Tiếng Anh Công nghệ thông tin 2 <br>(Lớp: 20232FL6344004)
                  <br><span class="red">(619 - A7 - Cơ sở 1 - Khu A)</span>
                </td>
                <td class="bold" colspan="2"> (3,4) - Tiếng Anh Công nghệ thông tin 2 <br>(Lớp: 20232FL6344004)
                  <br><span class="red">(619 - A7 - Cơ sở 1 - Khu A)</span>
                </td>
                <td colspan="2"></td>
                <td></td>
              </tr>
              <tr>
                <th scope="row">2</th>
                <td>Thứ 6 </td>
                <td>31/05/2024 </td>
                <td class="bold" colspan="2"> (3,4) - Tiếng Anh Công nghệ thông tin 2 <br>(Lớp: 20232FL6344004)
                  <br><span class="red">(619 - A7 - Cơ sở 1 - Khu A)</span>
                </td>
                <td class="bold" colspan="2"> (3,4) - Tiếng Anh Công nghệ thông tin 2 <br>(Lớp: 20232FL6344004)
                  <br><span class="red">(619 - A7 - Cơ sở 1 - Khu A)</span>
                </td>
                <td colspan="2"></td>
                <td></td>
              </tr>
              <tr>
                <th scope="row">1</th>
                <td>Thứ 7 </td>
                <td>01/06/2024 </td>
                <td class="bold" colspan="2"> (3,4) - Tiếng Anh Công nghệ thông tin 2 <br>(Lớp: 20232FL6344004)
                  <br><span class="red">(619 - A7 - Cơ sở 1 - Khu A)</span>
                </td>
                <td class="bold" colspan="2"> (3,4) - Tiếng Anh Công nghệ thông tin 2 <br>(Lớp: 20232FL6344004)
                  <br><span class="red">(619 - A7 - Cơ sở 1 - Khu A)</span>
                </td>
                <td colspan="2"></td>
                <td></td>
              </tr>
              <tr>
                <th scope="row">1</th>
                <td>Chủ nhật </td>
                <td>02/06/2024 </td>
                <td colspan="2"></td>
                <td colspan="2"></td>
                <td colspan="2"></td>
                <td colspan="2"></td>
              </tr>
              <tr>
                <th scope="row">1</th>
                <td>Thứ 2 </td>
                <td>03/06/2024 </td>
                <td class="bold" colspan="2"> (3,4) - Tiếng Anh Công nghệ thông tin 2 <br>(Lớp: 20232FL6344004)
                  <br><span class="red">(619 - A7 - Cơ sở 1 - Khu A)</span>
                </td>
                <td class="bold" colspan="2"> (3,4) - Tiếng Anh Công nghệ thông tin 2 <br>(Lớp: 20232FL6344004)
                  <br><span class="red">(619 - A7 - Cơ sở 1 - Khu A)</span>
                </td>
                <td colspan="2"></td>
                <td></td>
              </tr>
              <tr>
                <th scope="row">1</th>
                <td>Thứ 3 </td>
                <td>04/06/2024 </td>
                <td class="bold" colspan="2"> (3,4) - Tiếng Anh Công nghệ thông tin 2 <br>(Lớp: 20232FL6344004)
                  <br><span class="red">(619 - A7 - Cơ sở 1 - Khu A)</span>
                </td>
                <td class="bold" colspan="2"> (3,4) - Tiếng Anh Công nghệ thông tin 2 <br>(Lớp: 20232FL6344004)
                  <br><span class="red">(619 - A7 - Cơ sở 1 - Khu A)</span>
                </td>
                <td colspan="2"></td>
                <td></td>
              </tr>
              <tr>
                <th scope="row">1</th>
                <td>Thứ 4 </td>
                <td>05/06/2024 </td>
                <td class="bold" colspan="2"> (3,4) - Tiếng Anh Công nghệ thông tin 2 <br>(Lớp: 20232FL6344004)
                  <br><span class="red">(619 - A7 - Cơ sở 1 - Khu A)</span>
                </td>
                <td class="bold" colspan="2"> (3,4) - Tiếng Anh Công nghệ thông tin 2 <br>(Lớp: 20232FL6344004)
                  <br><span class="red">(619 - A7 - Cơ sở 1 - Khu A)</span>
                </td>
                <td colspan="2"></td>
                <td></td>
              </tr>
              <tr>
                <th scope="row">1</th>
                <td>Thứ 5 </td>
                <td>06/06/2024 </td>
                <td class="bold" colspan="2"> (3,4) - Tiếng Anh Công nghệ thông tin 2 <br>(Lớp: 20232FL6344004)
                  <br><span class="red">(619 - A7 - Cơ sở 1 - Khu A)</span>
                </td>
                <td class="bold" colspan="2"> (3,4) - Tiếng Anh Công nghệ thông tin 2 <br>(Lớp: 20232FL6344004)
                  <br><span class="red">(619 - A7 - Cơ sở 1 - Khu A)</span>
                </td>
                <td colspan="2"></td>
                <td></td>
              </tr>
              <tr>
                <th scope="row">1</th>
                <td>Thứ 6 </td>
                <td>07/06/2024 </td>
                <td class="bold" colspan="2"> (3,4) - Tiếng Anh Công nghệ thông tin 2 <br>(Lớp: 20232FL6344004)
                  <br><span class="red">(619 - A7 - Cơ sở 1 - Khu A)</span>
                </td>
                <td class="bold" colspan="2"> (3,4) - Tiếng Anh Công nghệ thông tin 2 <br>(Lớp: 20232FL6344004)
                  <br><span class="red">(619 - A7 - Cơ sở 1 - Khu A)</span>
                </td>
                <td colspan="2"></td>
                <td></td>
              </tr>
              <tr>
                <th scope="row">1</th>
                <td>Thứ 7 </td>
                <td>08/06/2024 </td>
                <td class="bold" colspan="2"> (3,4) - Tiếng Anh Công nghệ thông tin 2 <br>(Lớp: 20232FL6344004)
                  <br><span class="red">(619 - A7 - Cơ sở 1 - Khu A)</span>
                </td>
                <td class="bold" colspan="2"> (3,4) - Tiếng Anh Công nghệ thông tin 2 <br>(Lớp: 20232FL6344004)
                  <br><span class="red">(619 - A7 - Cơ sở 1 - Khu A)</span>
                </td>
                <td colspan="2"></td>
                <td></td>
              </tr>
              <tr>
                <th scope="row">1</th>
                <td>Chủ nhật </td>
                <td>09/06/2024 </td>
                <td colspan="2"></td>
                <td colspan="2"></td>
                <td colspan="2"></td>
                <td colspan="2"></td>
              </tr>
              <tr>
                <th scope="row">1</th>
                <td>Thứ 2 </td>
                <td>10/06/2024 </td>
                <td class="bold" colspan="2"> (3,4) - Tiếng Anh Công nghệ thông tin 2 <br>(Lớp: 20232FL6344004)
                  <br><span class="red">(619 - A7 - Cơ sở 1 - Khu A)</span>
                </td>
                <td class="bold" colspan="2"> (3,4) - Tiếng Anh Công nghệ thông tin 2 <br>(Lớp: 20232FL6344004)
                  <br><span class="red">(619 - A7 - Cơ sở 1 - Khu A)</span>
                </td>
                <td colspan="2"></td>
                <td></td>
              </tr>
              <tr>
                <th scope="row">1</th>
                <td>Thứ 3 </td>
                <td>11/06/2024 </td>
                <td class="bold" colspan="2"> (3,4) - Tiếng Anh Công nghệ thông tin 2 <br>(Lớp: 20232FL6344004)
                  <br><span class="red">(619 - A7 - Cơ sở 1 - Khu A)</span>
                </td>
                <td class="bold" colspan="2"> (3,4) - Tiếng Anh Công nghệ thông tin 2 <br>(Lớp: 20232FL6344004)
                  <br><span class="red">(619 - A7 - Cơ sở 1 - Khu A)</span>
                </td>
                <td colspan="2"></td>
                <td></td>
              </tr>
              <tr>
                <th scope="row">1</th>
                <td>Thứ 4 </td>
                <td>12/06/2024 </td>
                <td class="bold" colspan="2"> (3,4) - Tiếng Anh Công nghệ thông tin 2 <br>(Lớp: 20232FL6344004)
                  <br><span class="red">(619 - A7 - Cơ sở 1 - Khu A)</span>
                </td>
                <td class="bold" colspan="2"> (3,4) - Tiếng Anh Công nghệ thông tin 2 <br>(Lớp: 20232FL6344004)
                  <br><span class="red">(619 - A7 - Cơ sở 1 - Khu A)</span>
                </td>
                <td colspan="2"></td>
                <td></td>
              </tr>
              <tr>
                <th scope="row">1</th>
                <td>Thứ 5 </td>
                <td>13/06/2024 </td>
                <td class="bold" colspan="2"> (3,4) - Tiếng Anh Công nghệ thông tin 2 <br>(Lớp: 20232FL6344004)
                  <br><span class="red">(619 - A7 - Cơ sở 1 - Khu A)</span>
                </td>
                <td class="bold" colspan="2"> (3,4) - Tiếng Anh Công nghệ thông tin 2 <br>(Lớp: 20232FL6344004)
                  <br><span class="red">(619 - A7 - Cơ sở 1 - Khu A)</span>
                </td>
                <td colspan="2"></td>
                <td></td>
              </tr>
              <tr>
                <th scope="row">1</th>
                <td>Thứ 6 </td>
                <td>14/06/2024 </td>
                <td class="bold" colspan="2"> (3,4) - Tiếng Anh Công nghệ thông tin 2 <br>(Lớp: 20232FL6344004)
                  <br><span class="red">(619 - A7 - Cơ sở 1 - Khu A)</span>
                </td>
                <td class="bold" colspan="2"> (3,4) - Tiếng Anh Công nghệ thông tin 2 <br>(Lớp: 20232FL6344004)
                  <br><span class="red">(619 - A7 - Cơ sở 1 - Khu A)</span>
                </td>
                <td colspan="2"></td>
                <td></td>
              </tr>
              <tr>
                <th scope="row">1</th>
                <td>Thứ 7 </td>
                <td>15/06/2024 </td>
                <td class="bold" colspan="2"> (3,4) - Tiếng Anh Công nghệ thông tin 2 <br>(Lớp: 20232FL6344004)
                  <br><span class="red">(619 - A7 - Cơ sở 1 - Khu A)</span>
                </td>
                <td class="bold" colspan="2"> (3,4) - Tiếng Anh Công nghệ thông tin 2 <br>(Lớp: 20232FL6344004)
                  <br><span class="red">(619 - A7 - Cơ sở 1 - Khu A)</span>
                </td>
                <td colspan="2"></td>
                <td></td>
              </tr>
              <tr>
                <th scope="row">1</th>
                <td>Chủ nhật </td>
                <td>16/06/2024 </td>
                <td colspan="2"></td>
                <td colspan="2"></td>
                <td colspan="2"></td>
                <td colspan="2"></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
  </div>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script>
    $(document).ready(function () {
      updateTable();
      var currentDate = new Date();
      var nowDate = addDays(currentDate, -0).getDate();
      var nowMonth = addDays(currentDate, +0).getMonth() + 1
      var nowYear = addDays(currentDate, +0).getFullYear()

      var strNowDate = nowDate;
      var strNowMonth = nowMonth
      if (nowDate < 10) {
        strNowDate = `0${nowDate}`
      }
      if (strNowMonth < 10) {
        strNowMonth = `0${nowMonth}`
      }

      var ndate = `${strNowDate}/${strNowMonth}/${nowYear}`
      console.log(ndate)
      function addDays(date, days) {
        var result = new Date(date);
        result.setDate(result.getDate() + days);
        return result;
      }

      function updateTable() {
        var sevenDaysAgo = addDays(currentDate, -8);
        var sevenDaysLater = addDays(currentDate, 7);

        var SevenDayAgo = addDays(currentDate, -8).getDate()
        var monthSevenDayAgo = addDays(currentDate, -8).getMonth() + 1
        var yearSevenDayAgo = addDays(currentDate, -8).getFullYear()
        $("#dayStart").val(SevenDayAgo)
        $("#monthStart").val(monthSevenDayAgo)

        var SevenDayLater = addDays(currentDate, + 7).getDate()
        var monthSevenDayLater = addDays(currentDate, +7).getMonth() + 1
        var yearSevenDayLater = addDays(currentDate, +7).getFullYear()
        $("#dayEnd").val(SevenDayLater)
        $("#monthEnd").val(monthSevenDayLater)
        console.log(sevenDaysAgo)

        $("tbody tr").each(function () {
          var rowDateStr = $(this).find("td:eq(1)").text().trim();
          var parts = rowDateStr.split("/");
          var day = parseInt(parts[0]);
          var month = parseInt(parts[1]); // Giảm 1 vì tháng tính từ 0
          var year = parseInt(parts[2]);

          var rowDate = new Date(year, month, day);
          var dataSevenDateLater = new Date(yearSevenDayLater, monthSevenDayLater, SevenDayLater);
          var dataSevenDateAgo = new Date(yearSevenDayAgo, monthSevenDayAgo, SevenDayAgo);

          if (rowDate >= dataSevenDateAgo && rowDate <= dataSevenDateLater) {
            dataSevenDateLater = rowDate
            $(this).show();
          } else {
            $(this).hide();
          }

          if (ndate == $(this).find("td:eq(1)").text().trim()) {
            $(this).addClass("background")
          }

        });
      }

      // Gọi hàm updateTable khi trang được tải
      updateTable();

      $("#search").click(function () {
        var startDay = parseInt($("#dayStart").val());
        var startMonth = parseInt($("#monthStart").val()); // Trừ 1 để tính từ 0
        var startYear = parseInt($("#yearStart").val());
        var endDay = parseInt($("#dayEnd").val());
        var endMonth = parseInt($("#monthEnd").val()); // Trừ 1 để tính từ 0
        var endYear = parseInt($("#yearEnd").val());

        console.log(startDay + "/" + endMonth + "/" + startYear)

        var startDate = new Date(startYear, startMonth, startDay);
        var endDate = new Date(endYear, endMonth, endDay);

        $("tbody tr").each(function () {
          var rowDateStr = $(this).find("td:eq(1)").text().trim();
          var parts = rowDateStr.split("/");
          var day = parseInt(parts[0]);
          var month = parseInt(parts[1]); // Trừ 1 để tính từ 0
          var year = parseInt(parts[2]);

          var rowDate = new Date(year, month, day);

          if (rowDate >= startDate && rowDate <= endDate) {
            $(this).show();
          } else {
            $(this).hide();
          }
        });
      });
    });

  </script>

</body>

</html>